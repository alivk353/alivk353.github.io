
# frida

## cli

firda-ps -U 

frida -U -f com.shinhan.global.cn.bank -l /Users/nana/sec/Android/frida_env/xinhan/hook.js



objection -g com.shinhan.global.cn.bank explore

## obj

开启 frida-server
使用 -P 参数带着插件启动 objection
objection -g com.xx.xx explore -P ~/Documents/android/objection/plugins

指定文件 txt 运行 比如文件上写了， 批量需要hook的函数

- objection -g com.xx.xx explore -c ~/xxx.txt
- objection -g com.xx.xx explore -c ~/xxx.txt

### root

- 尝试关闭app的root检测 android root disable

- 尝试模拟root环境 android root simulate

### ui
- 截图 android ui screenshot image_name

- 设置FLAG_SECURE权限 android ui FLAG_SECURE false

### Memory 指令
memory list modules //枚举当前进程模块
memory list exports [lib_name] //查看指定模块的导出函数
memory list exports libart.so --json /root/libart.json //将结果保存到json文件中
memory search --string --offsets-only //搜索内存

### android heap

堆内存中搜索指定类的实例, 可以获取该类的实例id
- search instances search instances com.xx.xx.class

直接调用指定实例下的方法
- android heap execute [ins_id] [func_name]

自定义frida脚本, 执行实例的方法
- android heap execute [ins_id]

### 内存漫游
列出内存中所有的类
- android hooking list classes

在内存中所有已加载的类中搜索包含特定关键词的类
- android hooking search classes [search_name] 

在内存中所有已加载的方法中搜索包含特定关键词的方法
- android hooking search methods [search_name] 

直接生成hook代码
- android hooking generate simple [class_name]

### hook 方式

hook指定方法, 如果有重载会hook所有重载,如果有疑问可以看
- --dump-args : 打印参数
- --dump-backtrace : 打印调用栈
- --dump-return : 打印返回值

- android hooking watch class_method com.xxx.xxx.methodName --dump-args --dump-backtrace --dump-return

hook指定类, 会打印该类下的所以调用
- android hooking watch class com.xxx.xxx

设置返回值(只支持bool类型)
- android hooking set return_value com.xxx.xxx.methodName false

### spawn 方式 hook

- objection -g packageName explore --startup-command '[obejection_command]'

### activity 和 service

枚举activity

- android hooking list activities

启动activity
- android intent launch_activity [activity_class]

枚举services
- android hooking list services

启动services
- android intent launch_service [services_class]
任务管理
查看任务列表
- jobs list

关闭任务
- jobs kill [task_id]
关闭app的ssl校验
- android sslpinning disable




京口北固亭怀古

千古江山 英雄无觅孙仲谋处 
舞榭歌台 风流总被雨打风吹去
斜阳草树 寻常巷陌 人道寄奴曾住
想当年 金戈铁马 气吞万里如虎
